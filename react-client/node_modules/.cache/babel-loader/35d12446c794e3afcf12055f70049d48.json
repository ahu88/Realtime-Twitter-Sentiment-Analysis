{"ast":null,"code":"var _s = $RefreshSig$();\n\n//a custom hook that creates the socket.io-client, exposes a tweet object\n//, and whenever a new tweet is received - will add to the array of all tweets\nimport { useState, useRef, useEffect } from \"react\";\nimport { io } from \"socket.io-client\";\nconst ENDPOINT = \"http://localhost:4001/\";\n\nfunction useTweets() {\n  _s();\n\n  //received tweets from server -> is an array\n  const [tweets, setTweets] = useState([]);\n  const socketRef = useRef(); //object returned from useRef will persist for the full lifetime of the component\n  //create WebSocket connection with server\n  // const socket = io(ENDPOINT , {\n  //     withCredentials: true,\n  //     extraHeaders: {\n  //         \"my-custom-header\": \"abcd\"\n  //     }\n  // });\n  //handle tweet events\n\n  useEffect(() => {\n    //create WebSocket connection with server\n    // const socket = io(ENDPOINT , {\n    //     withCredentials: true,\n    //     extraHeaders: {\n    //         \"my-custom-header\": \"abcd\"\n    //     }\n    // });\n    socketRef.current = io(ENDPOINT);\n    socketRef.current.on(\"tweet\", tweet => {\n      console.log(tweet); //object that represents the tweet data to display\n\n      const newTweet = {\n        id: tweet.data.id,\n        text: tweet.data.text,\n        username: `@${tweet.includes.users[0].username}`\n      }; //add new tweet to array of tweets -> return this array\n\n      setTweets(tweets => [...tweets, newTweet]);\n    });\n    return () => socketRef.curent.disconnect();\n  }, []);\n  return tweets;\n}\n\n_s(useTweets, \"r8woRwXrQkN+3vmznPySVVo7QrE=\");\n\nexport default useTweets;","map":{"version":3,"sources":["E:/Documents/Side Projects/tweet-app/react-client/src/utils/useTweets.js"],"names":["useState","useRef","useEffect","io","ENDPOINT","useTweets","tweets","setTweets","socketRef","current","on","tweet","console","log","newTweet","id","data","text","username","includes","users","curent","disconnect"],"mappings":";;AAAA;AACA;AACA,SAASA,QAAT,EAAmBC,MAAnB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,SAAQC,EAAR,QAAiB,kBAAjB;AACA,MAAMC,QAAQ,GAAG,wBAAjB;;AAEA,SAASC,SAAT,GAAqB;AAAA;;AACjB;AACA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAAC,EAAD,CAApC;AACA,QAAMQ,SAAS,GAAGP,MAAM,EAAxB,CAHiB,CAGW;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;;AACAC,EAAAA,SAAS,CAAC,MAAM;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACAM,IAAAA,SAAS,CAACC,OAAV,GAAoBN,EAAE,CAACC,QAAD,CAAtB;AAEAI,IAAAA,SAAS,CAACC,OAAV,CAAkBC,EAAlB,CAAqB,OAArB,EAA+BC,KAAD,IAAW;AACrCC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EADqC,CAGrC;;AACA,YAAMG,QAAQ,GAAG;AACbC,QAAAA,EAAE,EAAGJ,KAAK,CAACK,IAAN,CAAWD,EADH;AAEbE,QAAAA,IAAI,EAAGN,KAAK,CAACK,IAAN,CAAWC,IAFL;AAGbC,QAAAA,QAAQ,EAAI,IAAGP,KAAK,CAACQ,QAAN,CAAeC,KAAf,CAAqB,CAArB,EAAwBF,QAAS;AAHnC,OAAjB,CAJqC,CAUrC;;AACAX,MAAAA,SAAS,CAAED,MAAD,IAAY,CAAC,GAAGA,MAAJ,EAAYQ,QAAZ,CAAb,CAAT;AACH,KAZD;AAeA,WAAO,MAAMN,SAAS,CAACa,MAAV,CAAiBC,UAAjB,EAAb;AACH,GA1BQ,EA0BN,EA1BM,CAAT;AA4BA,SAAOhB,MAAP;AACH;;GA7CQD,S;;AA+CT,eAAeA,SAAf","sourcesContent":["//a custom hook that creates the socket.io-client, exposes a tweet object\r\n//, and whenever a new tweet is received - will add to the array of all tweets\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport {io} from \"socket.io-client\";\r\nconst ENDPOINT = \"http://localhost:4001/\";\r\n\r\nfunction useTweets() {\r\n    //received tweets from server -> is an array\r\n    const [tweets, setTweets] = useState([]);\r\n    const socketRef = useRef(); //object returned from useRef will persist for the full lifetime of the component\r\n\r\n    //create WebSocket connection with server\r\n    // const socket = io(ENDPOINT , {\r\n    //     withCredentials: true,\r\n    //     extraHeaders: {\r\n    //         \"my-custom-header\": \"abcd\"\r\n    //     }\r\n    // });\r\n    \r\n\r\n\r\n    //handle tweet events\r\n    useEffect(() => {\r\n        //create WebSocket connection with server\r\n        // const socket = io(ENDPOINT , {\r\n        //     withCredentials: true,\r\n        //     extraHeaders: {\r\n        //         \"my-custom-header\": \"abcd\"\r\n        //     }\r\n        // });\r\n        socketRef.current = io(ENDPOINT)\r\n\r\n        socketRef.current.on(\"tweet\", (tweet) => {\r\n            console.log(tweet)\r\n\r\n            //object that represents the tweet data to display\r\n            const newTweet = {\r\n                id : tweet.data.id,\r\n                text : tweet.data.text,\r\n                username : `@${tweet.includes.users[0].username}`\r\n            }\r\n\r\n            //add new tweet to array of tweets -> return this array\r\n            setTweets((tweets) => [...tweets, newTweet]);\r\n        });\r\n\r\n        \r\n        return () => socketRef.curent.disconnect();\r\n    }, []);\r\n\r\n    return tweets;\r\n}\r\n\r\nexport default useTweets;\r\n\r\n"]},"metadata":{},"sourceType":"module"}